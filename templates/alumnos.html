{% extends "main.html" %}

{% block head %}
    <title>Alumnos</title>
    <link rel="stylesheet" href="/css/alum.css">
    <liknk rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css"> 
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/dataTables.bootstrap4.min.css">

    
    

{% endblock %}
{% block body %}
    <div class="row mt-5 justify-content-center">
        <div class="container col-lg">     
            <!-- navbar -->
            <nav class="navbar navbar-toggleable-md navbar-dark bg-dark">
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <ul class="navbar-nav ">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        {{user.username}}
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="{{url_for('logout')}}">Logout</a>                    
                        </div>
                    </li>
                </ul>                                 
                    
                <div class="collapse navbar-collapse" id="navbarText">
                    <ul class="navbar-nav mr-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="{{url_for('timeline')}}">Home <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('addAlumnos')}}">Alumnos</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Administradores</a>
                        </li>
                  </ul>
                  
                </div>
            </nav>

            <br> <br>

            <!-- alertas -->

            {% for field, errors in form.errors.items()%}
                <div class="alert alert-danger" id="alerts" role="alert">
                    {{form[field].label}}:{{','.join(errors)}}
                </div>
            {%endfor%}

            <!-- formulario -->

            <form class="" action="{{url_for('addAlumnos')}}" method="POST">
                {{ form.csrf_token }}
                <center>
                    <h4 class="mt-6"><strong>Formulario de registro de Alumnos!</strong></h4>
                </center>

                <div class="row" id="form-alum">
                    <div class="col-6 mt-3">
                        <label for="formGroupExampleInput">Matricula:</label>
                        {{form.matricula(class="form-control" , placeholder="Matricula")}}
                    </div>
                    <div class="col-6 mt-3">
                        <label for="formGroupExampleInput">Nombre:</label>
                        {{form.nombre(class="form-control" , placeholder="Nombre")}}
                    </div>
                    <div class="col-6 mt-3">
                        <label for="formGroupExampleInput">Apellidos:</label>
                        {{form.apellidos(class="form-control" , placeholder="Apellidos")}}
                    </div>
                    <div class="col-6 mt-3">
                        <label for="formGroupExampleInput">Genero:</label>
                        {{form.genero(class="custom-select")}}
                    </div>
                    <div class="col-6 mt-3">
                        <label for="formGroupExampleInput">Carrera:</label>
                        {{form.carrera(class="custom-select" )}}
                    </div>
                    <div class="col-6  mt-3">
                        <label for="formGroupExampleInput">Generación:</label>
                        {{form.generacion(class="custom-select" )}}
                    </div>
                    <div class="col-6  mt-3">
                        <label for="formGroupExampleInput">Estatus:</label>
                        {{form.estatus(class="custom-select" )}}
                    </div>
                    <div class="col-6  mt-3">
                        <label for="formGroupExampleInput">Domicilio:</label>
                        {{form.domicilio(class="form-control" , placeholder="Domicilio")}}
                    </div>
                    <div class="col-6  mt-3">
                        <label for="formGroupExampleInput">Telefono:</label>
                        {{form.tel(class="form-control" , placeholder="Telefono")}}
                    </div>
                    <div class="col-6  mt-3">
                        <label for="formGroupExampleInput">Correo:</label>
                        {{form.correo(class="form-control" , placeholder="Correo")}}
                    </div>
                    <div class="col-6  mt-3"></div>
                    
                </div>
                <center class="mt-2">
                    <button class="btn btn-primary">Registrar</button>

                </center>
                
              </form>
                           
            <!-- Mostrar los datos mediante una tabla -->
            <div class="table-responsive-sm" id="data-table">
                <table id="example" class="table ">
                    <thead class="thead-dark">
                        <tr>
                            <th>Id</th>
                            <th>Matricula</th>
                            <th>Nombre</th>
                            <th>Apellidos</th>
                            <th>Genero</th>
                            <th>Carrera</th>
                            <th>Generación</th>
                            <th>Estatus</th>
                            <th>Domicilio</th>
                            <th>Telefono</th>
                            <th>Correo</th>  
                            <th>Actualizar</th>               
                            <th>Eliminar</th>
    
                            
                        </tr>
                    </thead>
                    <tbody>
    
                        <!-- ciclo para obtener cada registro-->
    
                        {% for q in query %}
                        <tr>
                            <td>{{q._id}}</td>
                            <td>{{q.matricula}}</td>
                            <td>{{q.nombre}}</td>
                            <td>{{q.apellidos}}</td>
                            <td>{{q.genero}}</td>
                            <td>{{q.carrera}}</td>
                            <td>{{q.generacion}}</td>
                            <td>{{q.status}}</td>
                            <td>{{q.domicilio}}</td>
                            <td>{{q.telefono}}</td>
                            <td>{{q.correo}}</td>
                            <td><button  class="btn btn-primary" id="btn-upd">Actualizar</button></td>
                            <td><a href="{{url_for('delete_Alumno')}}">Eliminar</a></td>

    
                        </tr>
                        {%endfor%}
                    
                    </tbody>
                    <tfoot>
                        <tr>
                            <th>Matricula</th>
                            <th>Nombre</th>
                            <th>Apellidos</th>
                            <th>Genero</th>
                            <th>Carrera</th>
                            <th>Generación</th>
                            <th>Estatus</th>
                            <th>Domicilio</th>
                            <th>Telefono</th>
                            <th>Correo</th> 
                            <th>Actualizar</th>               
                            <th>Eliminar</th>
                           
                        </tr>
                    </tfoot>
                </table>

            </div>
            
                
            

        </div>

    </div>

    

    <!-- Script para inicializar la tabla -->
    <script>

        $(document).ready(function() {
            $('#example').dataTable( {
                "language": {
                    "url": "https://cdn.datatables.net/plug-ins/1.10.21/i18n/Spanish.json"
                }
            } );
        } );
    </script>

    
    
{% endblock %}
